<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libmnl: Netlink message batch helpers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libmnl
   &#160;<span id="projectnumber">1.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Netlink message batch helpers</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga28488fc4dee4c3e9eda5918f049db2af"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga28488fc4dee4c3e9eda5918f049db2af">mnl_nlmsg_batch_start</a> (void *buf, size_t limit)</td></tr>
<tr class="separator:ga28488fc4dee4c3e9eda5918f049db2af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3808adef3f49b297a6126db9bb700f61"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga3808adef3f49b297a6126db9bb700f61">mnl_nlmsg_batch_stop</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga3808adef3f49b297a6126db9bb700f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga250b4c9de05f05a812fc826413c659d9"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga250b4c9de05f05a812fc826413c659d9">mnl_nlmsg_batch_next</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga250b4c9de05f05a812fc826413c659d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0effcb34689320fc8a0944e719788209"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga0effcb34689320fc8a0944e719788209">mnl_nlmsg_batch_reset</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga0effcb34689320fc8a0944e719788209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4340c63a68b1df10529a0447607e3f7b"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga4340c63a68b1df10529a0447607e3f7b">mnl_nlmsg_batch_size</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga4340c63a68b1df10529a0447607e3f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e393f9aad68974d329c8e55713e818f"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga2e393f9aad68974d329c8e55713e818f">mnl_nlmsg_batch_head</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga2e393f9aad68974d329c8e55713e818f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga837415689234b39c79e6916d34cb83f3"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga837415689234b39c79e6916d34cb83f3">mnl_nlmsg_batch_current</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga837415689234b39c79e6916d34cb83f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84f2fb91b9d8de524d54473f7c839b49"><td class="memItemLeft" align="right" valign="top">EXPORT_SYMBOL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__batch.html#ga84f2fb91b9d8de524d54473f7c839b49">mnl_nlmsg_batch_is_empty</a> (struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *b)</td></tr>
<tr class="separator:ga84f2fb91b9d8de524d54473f7c839b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This library provides helpers to batch several messages into one single datagram. These helpers do not perform strict memory boundary checkings.</p>
<p>The following figure represents a Netlink message batch: </p><pre class="fragment">   |&lt;-------------- MNL_SOCKET_BUFFER_SIZE -------------&gt;|
   |&lt;-------------------- batch ------------------&gt;|     |
   |-----------|-----------|-----------|-----------|-----------|
   |&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|
   |-----------|-----------|-----------|-----------|-----------|
                         ^           ^
                         |           |
                    message N   message N+1
</pre><p>To start the batch, you have to call <a class="el" href="group__batch.html#ga28488fc4dee4c3e9eda5918f049db2af">mnl_nlmsg_batch_start()</a> and you can use <a class="el" href="group__batch.html#ga3808adef3f49b297a6126db9bb700f61">mnl_nlmsg_batch_stop()</a> to release it.</p>
<p>You have to invoke <a class="el" href="group__batch.html#ga250b4c9de05f05a812fc826413c659d9">mnl_nlmsg_batch_next()</a> to get room for a new message in the batch. If this function returns NULL, it means that the last message that was added (message N+1 in the figure above) does not fit the batch. Thus, you have to send the batch (which includes until message N) and, then, you have to call <a class="el" href="group__batch.html#ga0effcb34689320fc8a0944e719788209">mnl_nlmsg_batch_reset()</a> to re-initialize the batch (this moves message N+1 to the head of the buffer). For that reason, the buffer that you have to use to store the batch must be double of MNL_SOCKET_BUFFER_SIZE to ensure that the last message (message N+1) that did not fit into the batch is written inside valid memory boundaries. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga837415689234b39c79e6916d34cb83f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga837415689234b39c79e6916d34cb83f3">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL void* mnl_nlmsg_batch_current </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_current - returns current position in the batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns a pointer to the current position in the buffer that is used to store the batch. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00539">539</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga2e393f9aad68974d329c8e55713e818f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e393f9aad68974d329c8e55713e818f">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL void* mnl_nlmsg_batch_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_head - get head of this batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns a pointer to the head of the batch, which is the beginning of the buffer that is used. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00527">527</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga84f2fb91b9d8de524d54473f7c839b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84f2fb91b9d8de524d54473f7c839b49">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL bool mnl_nlmsg_batch_is_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_is_empty - check if there is any message in the batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns true if the batch is empty. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00550">550</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga250b4c9de05f05a812fc826413c659d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga250b4c9de05f05a812fc826413c659d9">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL bool mnl_nlmsg_batch_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_next - get room for the next message in the batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns false if the last message did not fit into the batch. Otherwise, it prepares the batch to provide room for the new Netlink message in the batch and returns true.</p>
<p>You have to put at least one message in the batch before calling this function, otherwise your application is likely to crash. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00474">474</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga0effcb34689320fc8a0944e719788209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0effcb34689320fc8a0944e719788209">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL void mnl_nlmsg_batch_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_reset - reset the batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function allows to reset a batch, so you can reuse it to create a new one. This function moves the last message which does not fit the batch to the head of the buffer, if any. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00495">495</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga4340c63a68b1df10529a0447607e3f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4340c63a68b1df10529a0447607e3f7b">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL size_t mnl_nlmsg_batch_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_size - get current size of the batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns the current size of the batch. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00515">515</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga28488fc4dee4c3e9eda5918f049db2af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28488fc4dee4c3e9eda5918f049db2af">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a>* mnl_nlmsg_batch_start </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_start - initialize a batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>pointer to the buffer that will store this batch </td></tr>
    <tr><td class="paramname">limit</td><td>maximum size of the batch (should be MNL_SOCKET_BUFFER_SIZE).</td></tr>
  </table>
  </dd>
</dl>
<p>The buffer that you pass must be double of MNL_SOCKET_BUFFER_SIZE. The limit must be half of the buffer size, otherwise expect funny memory corruptions 8-).</p>
<p>You can allocate the buffer that you use to store the batch in the stack or the heap, no restrictions in this regard. This function returns NULL on error. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00434">434</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
<a id="ga3808adef3f49b297a6126db9bb700f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3808adef3f49b297a6126db9bb700f61">&#9670;&nbsp;</a></span>mnl_nlmsg_batch_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL void mnl_nlmsg_batch_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmnl__nlmsg__batch.html">mnl_nlmsg_batch</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mnl_nlmsg_batch_stop - release a batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to batch</td></tr>
  </table>
  </dd>
</dl>
<p>This function releases the batch allocated by <a class="el" href="group__batch.html#ga28488fc4dee4c3e9eda5918f049db2af">mnl_nlmsg_batch_start()</a>. </p>

<p class="definition">Definition at line <a class="el" href="nlmsg_8c_source.html#l00458">458</a> of file <a class="el" href="nlmsg_8c_source.html">nlmsg.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
